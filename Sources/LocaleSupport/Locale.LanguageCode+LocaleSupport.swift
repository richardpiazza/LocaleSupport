import Foundation

public extension Locale.LanguageCode {
    /// Initializes a `Locale.LanguageCode` checking that it matched a _known_ instance.
    init(matching knownIdentifier: String) throws {
        let languageCode = Locale.LanguageCode(knownIdentifier)
        guard Self.allCases.contains(languageCode) else {
            throw LocaleSupportError.languageCode(knownIdentifier)
        }
        
        self = languageCode
    }
    
    /// A localized representation for the identifier using the current `Locale.`
    var localizedName: String? {
        localizedName()
    }

    /// A localized representation for the identifier using the provided `Locale.`
    func localizedName(for locale: Locale = .current) -> String? {
        locale.localizedString(forLanguageCode: identifier)
    }
}

#if hasFeature(RetroactiveAttribute)
extension Locale.LanguageCode: @retroactive Identifiable {
    public var id: String { identifier }
}
#else
extension Locale.LanguageCode: Identifiable {
    public var id: String { identifier }
}
#endif

#if hasFeature(RetroactiveAttribute)
extension Locale.LanguageCode: @retroactive CaseIterable {
    public static let allCases: [Locale.LanguageCode] = [
        .ainu,
        .albanian,
        .amharic,
        .apacheWestern,
        .arabic,
        .armenian,
        .assamese,
        .assyrian,
        .azerbaijani,
        .bangla,
        .belarusian,
        .bodo,
        .bulgarian,
        .burmese,
        .cantonese,
        .catalan,
        .cherokee,
        .chinese,
        .croatian,
        .czech,
        .danish,
        .dhivehi,
        .dogri,
        .dutch,
        .dzongkha,
        .english,
        .estonian,
        .faroese,
        .finnish,
        .french,
        .fula,
        .georgian,
        .german,
        .greek,
        .gujarati,
        .hawaiian,
        .hebrew,
        .hindi,
        .hungarian,
        .icelandic,
        .igbo,
        .indonesian,
        .irish,
        .italian,
        .japanese,
        .kannada,
        .kashmiri,
        .kazakh,
        .khmer,
        .konkani,
        .korean,
        .kurdish,
        .kurdishSorani,
        .kyrgyz,
        .lao,
        .latvian,
        .lithuanian,
        .macedonian,
        .maithili,
        .malay,
        .malayalam,
        .maltese,
        .manipuri,
        .m훮ori,
        .marathi,
        .mongolian,
        .navajo,
        .nepali,
        .norwegian,
        .norwegianBokm책l,
        .norwegianNynorsk,
        .odia,
        .pashto,
        .persian,
        .polish,
        .portuguese,
        .punjabi,
        .rohingya,
        .romanian,
        .russian,
        .samoan,
        .sanskrit,
        .santali,
        .serbian,
        .sindhi,
        .sinhala,
        .slovak,
        .slovenian,
        .spanish,
        .swahili,
        .swedish,
        .tagalog,
        .tajik,
        .tamil,
        .telugu,
        .thai,
        .tibetan,
        .tongan,
        .turkish,
        .turkmen,
        .ukrainian,
        .urdu,
        .uyghur,
        .uzbek,
        .vietnamese,
        .welsh,
        .yiddish,
    ]
}
#else
extension Locale.LanguageCode: CaseIterable {
    public static let allCases: [Locale.LanguageCode] = [
        .ainu,
        .albanian,
        .amharic,
        .apacheWestern,
        .arabic,
        .armenian,
        .assamese,
        .assyrian,
        .azerbaijani,
        .bangla,
        .belarusian,
        .bodo,
        .bulgarian,
        .burmese,
        .cantonese,
        .catalan,
        .cherokee,
        .chinese,
        .croatian,
        .czech,
        .danish,
        .dhivehi,
        .dogri,
        .dutch,
        .dzongkha,
        .english,
        .estonian,
        .faroese,
        .finnish,
        .french,
        .fula,
        .georgian,
        .german,
        .greek,
        .gujarati,
        .hawaiian,
        .hebrew,
        .hindi,
        .hungarian,
        .icelandic,
        .igbo,
        .indonesian,
        .irish,
        .italian,
        .japanese,
        .kannada,
        .kashmiri,
        .kazakh,
        .khmer,
        .konkani,
        .korean,
        .kurdish,
        .kurdishSorani,
        .kyrgyz,
        .lao,
        .latvian,
        .lithuanian,
        .macedonian,
        .maithili,
        .malay,
        .malayalam,
        .maltese,
        .manipuri,
        .m훮ori,
        .marathi,
        .mongolian,
        .navajo,
        .nepali,
        .norwegian,
        .norwegianBokm책l,
        .norwegianNynorsk,
        .odia,
        .pashto,
        .persian,
        .polish,
        .portuguese,
        .punjabi,
        .rohingya,
        .romanian,
        .russian,
        .samoan,
        .sanskrit,
        .santali,
        .serbian,
        .sindhi,
        .sinhala,
        .slovak,
        .slovenian,
        .spanish,
        .swahili,
        .swedish,
        .tagalog,
        .tajik,
        .tamil,
        .telugu,
        .thai,
        .tibetan,
        .tongan,
        .turkish,
        .turkmen,
        .ukrainian,
        .urdu,
        .uyghur,
        .uzbek,
        .vietnamese,
        .welsh,
        .yiddish,
    ]
}
#endif
